{% extends 'admin/layout.html' %}
{% block content %}
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2>{{ page_title }}</h2>
        <a href="{{ url_for(endpoint_prefix + '_create') }}">Buat Baru</a>
    </div>

    <form method="get" style="margin: 1rem 0;">
        <input type="search" name="q" placeholder="Cari..." value="{{ request.args.get('q', '') }}">
        <button type="submit">Cari</button>
    </form>

    <hr>
    
    <table border="1" width="100%">
        <thead>
            <tr>
                {% for col in list_display %}
                    <th>{{ col.replace('_', ' ').title() }}</th>
                {% endfor %}
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                {% for col in list_display %}
                    <td>{{ item[col] }}</td>
                {% endfor %}
                <td>
                    <a href="{{ url_for(endpoint_prefix + '_edit', id=item.id) }}">Edit</a>
                    <form action="{{ url_for(endpoint_prefix + '_destroy', id=item.id) }}" method="post" style="display:inline;">
                        <button type="submit" onclick="return confirm('Anda yakin?')">Hapus</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="{{ list_display|length + 1 }}" style="text-align: center;">Tidak ada data ditemukan.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="margin-top: 1rem;">
        Halaman {{ page }} dari {{ total_pages }}
        
        <span style="margin-left: 2rem;">
            {% if page > 1 %}
                <a href="{{ url_for(endpoint_prefix + '_index', page=page-1, q=request.args.get('q', '')) }}">&laquo; Sebelumnya</a>
            {% endif %}
            
            {% if page < total_pages %}
                <a href="{{ url_for(endpoint_prefix + '_index', page=page+1, q=request.args.get('q', '')) }}">Selanjutnya &raquo;</a>
            {% endif %}
        </span>
    </div>
{% endblock %}
